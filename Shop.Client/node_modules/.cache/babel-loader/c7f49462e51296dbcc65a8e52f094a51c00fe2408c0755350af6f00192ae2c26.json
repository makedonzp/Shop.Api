{"ast":null,"code":"import _objectSpread from\"D:/\\u0423\\u0447\\u0451\\u0431\\u0430/ShopApi/Shop.Client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import styles from'./AdminProductManager.module.css';// Импорт стилей\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProductManager=()=>{const[products,setProducts]=useState([]);const[newProduct,setNewProduct]=useState({title:'',description:'',price:0});useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{try{const response=await axios.get('http://localhost:3001/api/products');setProducts(response.data);}catch(error){console.error('Ошибка при загрузке товаров:',error);}};const handleAddProduct=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:3001/api/products',newProduct);setProducts([...products,response.data]);setNewProduct({title:'',description:'',price:0});alert('Товар успешно добавлен!');}catch(error){console.error('Ошибка при добавлении товара:',error);alert('Не удалось добавить товар.');}};const handleDeleteProduct=async id=>{try{await axios.delete(\"http://localhost:3001/api/products/\".concat(id));setProducts(products.filter(product=>product.id!==id));alert('Товар успешно удалён!');}catch(error){console.error('Ошибка при удалении товара:',error);alert('Не удалось удалить товар.');}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddProduct,className:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.title,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{title:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.description,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{description:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newProduct.price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{price:parseFloat(e.target.value)})),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.productList,children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:styles.productItem,children:[/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0426\\u0435\\u043D\\u0430: $\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProduct(product.id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]},product.id))})]});};export default AdminProductManager;","map":{"version":3,"names":["React","useState","useEffect","axios","styles","jsx","_jsx","jsxs","_jsxs","AdminProductManager","products","setProducts","newProduct","setNewProduct","title","description","price","fetchProducts","response","get","data","error","console","handleAddProduct","e","preventDefault","post","alert","handleDeleteProduct","id","delete","concat","filter","product","className","container","children","onSubmit","form","type","value","onChange","_objectSpread","target","required","parseFloat","productList","map","productItem","onClick"],"sources":["D:/Учёба/ShopApi/Shop.Client/src/pages/AdminProductManager.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport styles from './AdminProductManager.module.css'; // Импорт стилей\r\n\r\ninterface Product {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  price: number;\r\n}\r\n\r\nconst AdminProductManager: React.FC = () => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [newProduct, setNewProduct] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3001/api/products');\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке товаров:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddProduct = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:3001/api/products', newProduct);\r\n      setProducts([...products, response.data]);\r\n      setNewProduct({ title: '', description: '', price: 0 });\r\n      alert('Товар успешно добавлен!');\r\n    } catch (error) {\r\n      console.error('Ошибка при добавлении товара:', error);\r\n      alert('Не удалось добавить товар.');\r\n    }\r\n  };\r\n\r\n  const handleDeleteProduct = async (id: number) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3001/api/products/${id}`);\r\n      setProducts(products.filter(product => product.id !== id));\r\n      alert('Товар успешно удалён!');\r\n    } catch (error) {\r\n      console.error('Ошибка при удалении товара:', error);\r\n      alert('Не удалось удалить товар.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1>Управление товарами</h1>\r\n\r\n      <form onSubmit={handleAddProduct} className={styles.form}>\r\n        <div>\r\n          <label>Название:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={newProduct.title}\r\n            onChange={(e) => setNewProduct({ ...newProduct, title: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Описание:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={newProduct.description}\r\n            onChange={(e) => setNewProduct({ ...newProduct, description: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Цена:</label>\r\n          <input\r\n            type=\"number\"\r\n            value={newProduct.price}\r\n            onChange={(e) => setNewProduct({ ...newProduct, price: parseFloat(e.target.value) })}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\">Добавить товар</button>\r\n      </form>\r\n\r\n      <h2>Список товаров</h2>\r\n      <ul className={styles.productList}>\r\n        {products.map((product) => (\r\n          <li key={product.id} className={styles.productItem}>\r\n            <h3>{product.title}</h3>\r\n            <p>{product.description}</p>\r\n            <p>Цена: ${product.price}</p>\r\n            <button onClick={() => handleDeleteProduct(product.id)}>Удалить</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminProductManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}