{"ast":null,"code":"import _objectSpread from\"D:/\\u0423\\u0447\\u0451\\u0431\\u0430/ShopApi/Shop.Client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import styles from'./AdminProductManager.module.css';// Импорт стилей\nimport{Col,Container,Row}from'react-bootstrap';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProductManager=()=>{const[products,setProducts]=useState([]);const[newProduct,setNewProduct]=useState({title:'',description:'',price:0});useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{try{const response=await axios.get('http://localhost:3001/api/products');setProducts(response.data);}catch(error){console.error('Ошибка при загрузке товаров:',error);}};const handleAddProduct=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:3001/api/products',newProduct);setProducts([...products,response.data]);setNewProduct({title:'',description:'',price:0});alert('Товар успешно добавлен!');}catch(error){console.error('Ошибка при добавлении товара:',error);alert('Не удалось добавить товар.');}};const handleDeleteProduct=async id=>{try{await axios.delete(\"http://localhost:3001/api/products/\".concat(id));setProducts(products.filter(product=>product.id!==id));alert('Товар успешно удалён!');}catch(error){console.error('Ошибка при удалении товара:',error);alert('Не удалось удалить товар.');}};return/*#__PURE__*/_jsxs(Container,{fluid:true,className:styles.containerFluid,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{className:styles.backBnt,to:\"/\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})})}),/*#__PURE__*/_jsxs(Container,{className:styles.container,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:styles.Col,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddProduct,className:styles.form,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.title,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{title:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProduct.description,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{description:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newProduct.price,onChange:e=>setNewProduct(_objectSpread(_objectSpread({},newProduct),{},{price:parseFloat(e.target.value)})),required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.btnWrapper,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"})})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"ul\",{className:styles.productList,children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:styles.productItem,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.textCards,children:[/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0426\\u0435\\u043D\\u0430: $\",product.price]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProduct(product.id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]},product.id))})})})]})]});};export default AdminProductManager;","map":{"version":3,"names":["React","useState","useEffect","axios","styles","Col","Container","Row","Link","jsx","_jsx","jsxs","_jsxs","AdminProductManager","products","setProducts","newProduct","setNewProduct","title","description","price","fetchProducts","response","get","data","error","console","handleAddProduct","e","preventDefault","post","alert","handleDeleteProduct","id","delete","concat","filter","product","fluid","className","containerFluid","children","backBnt","to","container","onSubmit","form","type","value","onChange","_objectSpread","target","required","parseFloat","btnWrapper","productList","map","productItem","textCards","onClick"],"sources":["D:/Учёба/ShopApi/Shop.Client/src/pages/AdminProductManager.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport styles from './AdminProductManager.module.css'; // Импорт стилей\r\nimport { Col, Container, Row } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Product {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  price: number;\r\n}\r\n\r\nconst AdminProductManager: React.FC = () => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [newProduct, setNewProduct] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3001/api/products');\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке товаров:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddProduct = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:3001/api/products', newProduct);\r\n      setProducts([...products, response.data]);\r\n      setNewProduct({ title: '', description: '', price: 0 });\r\n      alert('Товар успешно добавлен!');\r\n    } catch (error) {\r\n      console.error('Ошибка при добавлении товара:', error);\r\n      alert('Не удалось добавить товар.');\r\n    }\r\n  };\r\n\r\n  const handleDeleteProduct = async (id: number) => {\r\n    try {\r\n      await axios.delete(`http://localhost:3001/api/products/${id}`);\r\n      setProducts(products.filter(product => product.id !== id));\r\n      alert('Товар успешно удалён!');\r\n    } catch (error) {\r\n      console.error('Ошибка при удалении товара:', error);\r\n      alert('Не удалось удалить товар.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container fluid className={styles.containerFluid}>\r\n      <Row>\r\n            <Col>\r\n            <Link className={styles.backBnt} to={\"/\"}>Назад</Link>\r\n            </Col>\r\n        </Row>\r\n    <Container className={styles.container}>\r\n      \r\n      <Row>\r\n        <Col>\r\n          <h1>Управление товарами</h1>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row>\r\n        <Col className={styles.Col}>\r\n        <form onSubmit={handleAddProduct} className={styles.form}>\r\n          <div>\r\n            <h3>Добавить товар</h3>\r\n          </div>\r\n        <div>\r\n        <div>\r\n          <label>Название:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={newProduct.title}\r\n            onChange={(e) => setNewProduct({ ...newProduct, title: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Описание:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={newProduct.description}\r\n            onChange={(e) => setNewProduct({ ...newProduct, description: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Цена:</label>\r\n          <input\r\n            type=\"number\"\r\n            value={newProduct.price}\r\n            onChange={(e) => setNewProduct({ ...newProduct, price: parseFloat(e.target.value) })}\r\n            required\r\n          />\r\n        </div>\r\n        </div>\r\n        <div className={styles.btnWrapper}>\r\n        <button type=\"submit\">Добавить товар</button>\r\n        </div>\r\n      </form>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n      <h2>Список товаров</h2>\r\n\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n        <ul className={styles.productList}>\r\n        {products.map((product) => (\r\n          <li key={product.id} className={styles.productItem}>\r\n            <div className={styles.textCards}>\r\n            <h3>{product.title}</h3>\r\n            <p>{product.description}</p>\r\n            <p>Цена: ${product.price}</p>\r\n            </div>\r\n            \r\n            <button onClick={() => handleDeleteProduct(product.id)}>Удалить</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n        </Col>\r\n      </Row>\r\n      \r\n    </Container>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdminProductManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}